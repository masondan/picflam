import{f as I,a as h,c as B}from"../chunks/J2XMMgAP.js";import"../chunks/BqSbb9ct.js";import{D as we,i as L,w as ca,B as ye,j as va,N as ua,g as H,a5 as ve,P as fa,Q as da,R as Ne,S as Ie,A as ge,af as ga,aH as pa,ar as Re,G as ha,K as ke,M as ba,aF as Ae,aN as ma,ad as Oe,_ as xe,aO as _a,aP as wa,aQ as ya,aR as Y,H as Ye,J as qe,aS as Se,aB as Ia,aT as Sa,aE as ka,I as xa,aU as Qe,W as Ta,aV as Ca,aW as Ea,aX as za,aY as Aa,p as Z,t as G,q as j,v as E,k as A,m as C,$ as pe,b as Fa,o as U}from"../chunks/BzM7qxc2.js";import{p as O,b as Pa,i as F,s as J,a as me}from"../chunks/BEBdknVw.js";import{i as ee}from"../chunks/Bq_h8HWI.js";import{e as P,s as be}from"../chunks/sBeDOaB9.js";import{d as Fe,w as K}from"../chunks/Fgk67qUn.js";function Xe(a,t){return t}function Ma(a,t,e){for(var r=[],o=t.length,i,s=t.length,v=0;v<o;v++){let _=t[v];qe(_,()=>{if(i){if(i.pending.delete(_),i.done.add(_),i.pending.size===0){var d=a.outrogroups;Te(Ae(i.done)),d.delete(i),d.size===0&&(a.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=r.length===0&&e!==null;if(l){var f=e,u=f.parentNode;ka(u),u.append(f),a.items.clear()}Te(t,!l)}else i={pending:new Set(t),done:new Set},(a.outrogroups??=new Set).add(i)}function Te(a,t=!0){for(var e=0;e<a.length;e++)xa(a[e],t)}var Ue;function Ve(a,t,e,r,o,i=null){var s=a,v=new Map,l=(t&Qe)!==0;if(l){var f=a;s=L?we(ca(f)):f.appendChild(ye())}L&&va();var u=null,_=ve(()=>{var c=e();return ma(c)?c:c==null?[]:Ae(c)}),d,m=!0;function w(){n.fallback=u,Na(n,d,s,t,r),u!==null&&(d.length===0?(u.f&Y)===0?Ye(u):(u.f^=Y,le(u,null,s)):qe(u,()=>{u=null}))}var z=ua(()=>{d=H(_);var c=d.length;let S=!1;if(L){var k=fa(s)===da;k!==(c===0)&&(s=Ne(),we(s),Ie(!1),S=!0)}for(var x=new Set,y=ha,g=ba(),b=0;b<c;b+=1){L&&ge.nodeType===ga&&ge.data===pa&&(s=ge,S=!0,Ie(!1));var M=d[b],T=r(M,b),p=m?null:v.get(T);p?(p.v&&Re(p.v,M),p.i&&Re(p.i,b),g&&y.skipped_effects.delete(p.e)):(p=Ra(v,m?s:Ue??=ye(),M,T,b,o,t,e),m||(p.e.f|=Y),v.set(T,p)),x.add(T)}if(c===0&&i&&!u&&(m?u=ke(()=>i(s)):(u=ke(()=>i(Ue??=ye())),u.f|=Y)),L&&c>0&&we(Ne()),!m)if(g){for(const[D,$]of v)x.has(D)||y.skipped_effects.add($.e);y.oncommit(w),y.ondiscard(()=>{})}else w();S&&Ie(!0),H(_)}),n={effect:z,items:v,outrogroups:null,fallback:u};m=!1,L&&(s=ge)}function ie(a){for(;a!==null&&(a.f&Sa)===0;)a=a.next;return a}function Na(a,t,e,r,o){var i=(r&Ca)!==0,s=t.length,v=a.items,l=ie(a.effect.first),f,u=null,_,d=[],m=[],w,z,n,c;if(i)for(c=0;c<s;c+=1)w=t[c],z=o(w,c),n=v.get(z).e,(n.f&Y)===0&&(n.nodes?.a?.measure(),(_??=new Set).add(n));for(c=0;c<s;c+=1){if(w=t[c],z=o(w,c),n=v.get(z).e,a.outrogroups!==null)for(const p of a.outrogroups)p.pending.delete(n),p.done.delete(n);if((n.f&Y)!==0)if(n.f^=Y,n===l)le(n,null,e);else{var S=u?u.next:l;n===a.effect.last&&(a.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),Q(a,u,n),Q(a,n,S),le(n,S,e),u=n,d=[],m=[],l=ie(u.next);continue}if((n.f&Se)!==0&&(Ye(n),i&&(n.nodes?.a?.unfix(),(_??=new Set).delete(n))),n!==l){if(f!==void 0&&f.has(n)){if(d.length<m.length){var k=m[0],x;u=k.prev;var y=d[0],g=d[d.length-1];for(x=0;x<d.length;x+=1)le(d[x],k,e);for(x=0;x<m.length;x+=1)f.delete(m[x]);Q(a,y.prev,g.next),Q(a,u,y),Q(a,g,k),l=k,u=g,c-=1,d=[],m=[]}else f.delete(n),le(n,l,e),Q(a,n.prev,n.next),Q(a,n,u===null?a.effect.first:u.next),Q(a,u,n),u=n;continue}for(d=[],m=[];l!==null&&l!==n;)(f??=new Set).add(l),m.push(l),l=ie(l.next);if(l===null)continue}(n.f&Y)===0&&d.push(n),u=n,l=ie(n.next)}if(a.outrogroups!==null){for(const p of a.outrogroups)p.pending.size===0&&(Te(Ae(p.done)),a.outrogroups?.delete(p));a.outrogroups.size===0&&(a.outrogroups=null)}if(l!==null||f!==void 0){var b=[];if(f!==void 0)for(n of f)(n.f&Se)===0&&b.push(n);for(;l!==null;)(l.f&Se)===0&&l!==a.fallback&&b.push(l),l=ie(l.next);var M=b.length;if(M>0){var T=(r&Qe)!==0&&s===0?e:null;if(i){for(c=0;c<M;c+=1)b[c].nodes?.a?.measure();for(c=0;c<M;c+=1)b[c].nodes?.a?.fix()}Ma(a,b,T)}}i&&Ta(()=>{if(_!==void 0)for(n of _)n.nodes?.a?.apply()})}function Ra(a,t,e,r,o,i,s,v){var l=(s&wa)!==0?(s&ya)===0?xe(e,!1,!1):Oe(e):null,f=(s&_a)!==0?Oe(o):null;return{v:l,i:f,e:ke(()=>(i(t,l??e,f??o,v),()=>{a.delete(r)}))}}function le(a,t,e){if(a.nodes)for(var r=a.nodes.start,o=a.nodes.end,i=t&&(t.f&Y)===0?t.nodes.start:e;r!==null;){var s=Ia(r);if(i.before(r),r===o)return;r=s}}function Q(a,t,e){t===null?a.effect.first=e:t.next=e,e===null?a.effect.last=t:e.prev=t}const He=[...` 	
\r\fÂ \v\uFEFF`];function Oa(a,t,e){var r=a==null?"":""+a;if(e){for(var o in e)if(e[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,s=0;(s=r.indexOf(o,s))>=0;){var v=s+i;(s===0||He.includes(r[s-1]))&&(v===r.length||He.includes(r[v]))?r=(s===0?"":r.substring(0,s))+r.substring(v+1):s=v}}return r===""?null:r}function Ua(a,t){return a==null?null:String(a)}function ce(a,t,e,r,o,i){var s=a.__className;if(L||s!==e||s===void 0){var v=Oa(e,r,i);(!L||v!==a.getAttribute("class"))&&(v==null?a.removeAttribute("class"):a.className=v),a.__className=e}else if(i&&o!==i)for(var l in i){var f=!!i[l];(o==null||f!==!!o[l])&&a.classList.toggle(l,f)}return i}function Ha(a,t,e,r){var o=a.__style;if(L||o!==t){var i=Ua(t);(!L||i!==a.getAttribute("style"))&&(i==null?a.removeAttribute("style"):a.style.cssText=i),a.__style=t}return r}const Da=Symbol("is custom element"),La=Symbol("is html");function Ge(a,t,e,r){var o=Ba(a);if(L){o[t]=a.getAttribute(t);return}o[t]!==(o[t]=e)&&(e==null?a.removeAttribute(t):typeof e!="string"&&Ja(a).includes(t)?a[t]=e:a.setAttribute(t,e))}function Ba(a){return a.__attributes??={[Da]:a.nodeName.includes("-"),[La]:a.namespaceURI===Ea}}var De=new Map;function Ja(a){var t=a.getAttribute("is")||a.nodeName,e=De.get(t);if(e)return e;De.set(t,e=[]);for(var r,o=a,i=Element.prototype;i!==o;){r=Aa(o);for(var s in r)r[s].set&&e.push(s);o=za(o)}return e}function Wa(a){return function(...t){var e=t[0];return e.stopPropagation(),a?.apply(this,t)}}var Ya=I('<header class="header svelte-hv3zzy"><img src="/logos/logo-picflam-logotype.png" alt="PicFlam" class="header-logo svelte-hv3zzy"/> <nav class="header-nav svelte-hv3zzy"><button aria-label="Crop tab"><img src="/icons/icon-crop.svg" alt="" class="nav-icon svelte-hv3zzy"/></button> <button aria-label="AI tab"><img src="/icons/icon-ai.svg" alt="" class="nav-icon svelte-hv3zzy"/></button> <button aria-label="Design tab"><img src="/icons/icon-design.svg" alt="" class="nav-icon svelte-hv3zzy"/></button></nav></header>');function qa(a,t){Z(t,!1);let e=O(t,"activeTab",8,"crop"),r=O(t,"onTabChange",8);ee();var o=Ya(),i=E(A(o),2),s=A(i);let v;var l=E(s,2);let f;var u=E(l,2);let _;C(i),C(o),G(()=>{v=ce(s,1,"nav-btn svelte-hv3zzy",null,v,{active:e()==="crop"}),f=ce(l,1,"nav-btn svelte-hv3zzy",null,f,{active:e()==="ai"}),_=ce(u,1,"nav-btn svelte-hv3zzy",null,_,{active:e()==="design"})}),P("click",s,()=>r()("crop")),P("click",l,()=>r()("ai")),P("click",u,()=>r()("design")),h(a,o),j()}function Ke(a){return new Promise((t,e)=>{const r=new FileReader;r.onload=o=>t(o.target.result),r.onerror=e,r.readAsDataURL(a)})}function Qa(a){return new Promise((t,e)=>{const r=new Image;r.onload=()=>t(r),r.onerror=e,r.src=a})}function Le(a,t=2048){return new Promise(async e=>{const r=await Qa(a),{naturalWidth:o,naturalHeight:i}=r;if(o<=t&&i<=t){e(a);return}const s=document.createElement("canvas"),v=s.getContext("2d");let l,f;o>i?(l=t,f=i/o*t):(f=t,l=o/i*t),s.width=l,s.height=f,v.drawImage(r,0,0,l,f),e(s.toDataURL("image/jpeg",.92))})}async function Xa(){try{const a=await navigator.clipboard.read();for(const t of a)for(const e of t.types)if(e.startsWith("image/")){const r=await t.getType(e);return await Ke(r)}return null}catch(a){return console.error("Failed to paste from clipboard:",a),null}}async function $e(a){try{const e=await(await fetch(a)).blob();return await navigator.clipboard.write([new ClipboardItem({[e.type]:e})]),!0}catch(t){return console.error("Failed to copy to clipboard:",t),!1}}function Ze(a,t="picflam-export.png"){const e=document.createElement("a");e.href=a,e.download=t,document.body.appendChild(e),e.click(),document.body.removeChild(e)}var Va=I('<div role="button" tabindex="0"><p class="import-title svelte-f1bndr"> </p> <img src="/icons/icon-upload.svg" alt="" class="import-icon svelte-f1bndr"/> <p class="import-hint svelte-f1bndr"> </p> <button class="btn-paste svelte-f1bndr">Paste</button> <input type="file" accept="image/*" class="sr-only"/></div>');function je(a,t){Z(t,!1);let e=O(t,"title",8,"Import an image"),r=O(t,"hint",8,"Import, drag or paste an image"),o=O(t,"onImageImport",8,g=>{}),i=xe(!1),s=xe();async function v(g){if(!g||!g.type.startsWith("image/"))return;const b=await Ke(g),M=await Le(b,2048);o()(M)}function l(g){const b=g.target.files?.[0];b&&v(b)}function f(g){g.preventDefault(),pe(i,!1);const b=g.dataTransfer?.files?.[0];b&&v(b)}function u(g){g.preventDefault(),pe(i,!0)}function _(){pe(i,!1)}async function d(){const g=await Xa();if(g){const b=await Le(g,2048);o()(b)}}function m(){H(s)?.click()}ee();var w=Va();let z;var n=A(w),c=A(n,!0);C(n);var S=E(n,4),k=A(S,!0);C(S);var x=E(S,2),y=E(x,2);Pa(y,g=>pe(s,g),()=>H(s)),C(w),G(()=>{z=ce(w,1,"import-area svelte-f1bndr",null,z,{dragging:H(i)}),be(c,e()),be(k,r())}),P("click",x,Wa(d)),P("change",y,l),P("click",w,m),P("drop",w,f),P("dragover",w,u),P("dragleave",w,_),P("keypress",w,g=>g.key==="Enter"&&m()),h(a,w),j()}var Ga=I('<div class="action-bar svelte-96zw02"><div class="action-group svelte-96zw02"><button class="action-btn svelte-96zw02" aria-label="Undo"><img src="/icons/icon-undo.svg" alt="" class="action-icon svelte-96zw02"/></button> <button class="action-btn svelte-96zw02" aria-label="Redo"><img src="/icons/icon-redo.svg" alt="" class="action-icon svelte-96zw02"/></button></div> <div class="action-group svelte-96zw02"><button class="action-btn svelte-96zw02" aria-label="Start again"><img src="/icons/icon-startagain.svg" alt="" class="action-icon svelte-96zw02"/></button> <button class="action-btn svelte-96zw02" aria-label="Copy to clipboard"><img src="/icons/icon-copy.svg" alt="" class="action-icon svelte-96zw02"/></button> <button class="action-btn svelte-96zw02" aria-label="Export"><img src="/icons/icon-export.svg" alt="" class="action-icon svelte-96zw02"/></button></div></div>');function Pe(a,t){let e=O(t,"canUndo",8,!1),r=O(t,"canRedo",8,!1),o=O(t,"onUndo",8,()=>{}),i=O(t,"onRedo",8,()=>{}),s=O(t,"onStartAgain",8,()=>{}),v=O(t,"onCopy",8,()=>{}),l=O(t,"onExport",8,()=>{});var f=Ga(),u=A(f),_=A(u),d=E(_,2);C(u);var m=E(u,2),w=A(m),z=E(w,2),n=E(z,2);C(m),C(f),G(()=>{_.disabled=!e(),d.disabled=!r()}),P("click",_,function(...c){o()?.apply(this,c)}),P("click",d,function(...c){i()?.apply(this,c)}),P("click",w,function(...c){s()?.apply(this,c)}),P("click",z,function(...c){v()?.apply(this,c)}),P("click",n,function(...c){l()?.apply(this,c)}),h(a,f)}var Ka=I("<button> </button>"),$a=I('<div class="sub-menu-tabs svelte-tv6tw8"></div>');function Me(a,t){Z(t,!1);let e=O(t,"tabs",24,()=>[]),r=O(t,"activeTab",8,""),o=O(t,"onTabChange",8,s=>{});ee();var i=$a();Ve(i,5,e,Xe,(s,v)=>{var l=Ka();let f;var u=A(l,!0);C(l),G(()=>{f=ce(l,1,"sub-menu-tab svelte-tv6tw8",null,f,{active:r()===H(v).id}),be(u,(H(v),Fa(()=>H(v).label)))}),P("click",l,()=>o()(H(v).id)),h(s,l)}),C(i),h(a,i),j()}function Za(a){const t=[a];let e=0;const{subscribe:r,set:o,update:i}=K(a);return{subscribe:r,set:s=>{t.splice(e+1),t.push(s),e=t.length-1,o(s)},undo:()=>{e>0&&(e--,o(t[e]))},redo:()=>{e<t.length-1&&(e++,o(t[e]))},canUndo:()=>e>0,canRedo:()=>e<t.length-1,reset:()=>{t.length=0,t.push(a),e=0,o(a)}}}const ja={originalImage:null,currentImage:null,aspectRatio:"custom",width:0,height:0,ratioLocked:!1,scale:1,offsetX:0,offsetY:0,brightness:0,contrast:0,shadows:0,hdr:0,blurBrushSize:20,activeFilter:"original",filterStrength:50},X=Za(ja),Ce=K("none"),et=Fe(X,a=>a.currentImage!==null);function at(){X.reset(),Ce.set("none")}var tt=I('<div class="controls-panel svelte-c9tnuw"><p class="placeholder svelte-c9tnuw">Crop controls coming in Phase 3</p></div>'),nt=I('<div class="controls-panel svelte-c9tnuw"><p class="placeholder svelte-c9tnuw">Edit controls coming in Phase 3</p></div>'),rt=I('<div class="controls-panel svelte-c9tnuw"><p class="placeholder svelte-c9tnuw">Filter controls coming in Phase 3</p></div>'),ot=I('<!> <div class="image-container svelte-c9tnuw"><img alt="Working image" class="working-image svelte-c9tnuw"/></div> <!> <!>',1),st=I('<div class="crop-tab svelte-c9tnuw"><!></div>');function it(a,t){Z(t,!1);const e=()=>J(X,"$cropState",i),r=()=>J(Ce,"$activeSubMenu",i),o=()=>J(et,"$hasImage",i),[i,s]=me(),v=[{id:"crop",label:"Crop"},{id:"edit",label:"Edit"},{id:"filter",label:"Filter"}];function l(n){X.set({...e(),originalImage:n,currentImage:n})}function f(n){Ce.set(r()===n?"none":n)}async function u(){e().currentImage&&await $e(e().currentImage)}function _(){e().currentImage&&Ze(e().currentImage,"picflam-crop.png")}ee();var d=st(),m=A(d);{var w=n=>{je(n,{title:"Crop, edit and add filters to photos",hint:"Import, drag or paste an image",onImageImport:l})},z=n=>{var c=ot(),S=U(c);{let T=ve(()=>X.canUndo()),p=ve(()=>X.canRedo());Pe(S,{get canUndo(){return H(T)},get canRedo(){return H(p)},onUndo:()=>X.undo(),onRedo:()=>X.redo(),get onStartAgain(){return at},onCopy:u,onExport:_})}var k=E(S,2),x=A(k);C(k);var y=E(k,2);Me(y,{get tabs(){return v},get activeTab(){return r()},onTabChange:f});var g=E(y,2);{var b=T=>{var p=tt();h(T,p)},M=T=>{var p=B(),D=U(p);{var $=R=>{var N=nt();h(R,N)},re=R=>{var N=B(),q=U(N);{var oe=W=>{var se=rt();h(W,se)};F(q,W=>{r()==="filter"&&W(oe)},!0)}h(R,N)};F(D,R=>{r()==="edit"?R($):R(re,!1)},!0)}h(T,p)};F(g,T=>{r()==="crop"?T(b):T(M,!1)})}G(()=>Ge(x,"src",e().currentImage)),h(n,c)};F(m,n=>{o()?n(z,!1):n(w)})}C(d),h(a,d),j(),s()}const Be={originalImage:null,currentImage:null,processedImage:null,isProcessing:!1,processingType:null,upscaleFactor:1,showComparison:!1,comparisonPosition:50};function lt(){const{subscribe:a,set:t,update:e}=K(Be);return{subscribe:a,setImage:r=>e(o=>({...o,originalImage:r,currentImage:r,processedImage:null})),startProcessing:r=>e(o=>({...o,isProcessing:!0,processingType:r})),finishProcessing:r=>e(o=>({...o,isProcessing:!1,processingType:null,processedImage:r,currentImage:r,showComparison:!0})),cancelProcessing:()=>e(r=>({...r,isProcessing:!1,processingType:null})),setUpscaleFactor:r=>e(o=>({...o,upscaleFactor:r})),setComparisonPosition:r=>e(o=>({...o,comparisonPosition:r})),reset:()=>t(Be)}}const he=lt(),Je=K("enhance"),ct=Fe(he,a=>a.currentImage!==null);var vt=I('<div class="controls-panel svelte-17agwu4"><button class="ai-action-btn svelte-17agwu4"><img src="/icons/icon-ai.svg" alt="" class="ai-icon svelte-17agwu4"/> Enhance image</button> <p class="ai-hint svelte-17agwu4">Sharpens and enhances images at the same size</p></div>'),ut=I('<div class="controls-panel svelte-17agwu4"><p class="placeholder svelte-17agwu4">Upscale controls coming in Phase 4</p></div>'),ft=I('<div class="controls-panel svelte-17agwu4"><p class="placeholder svelte-17agwu4">Background removal coming in Phase 4</p></div>'),dt=I('<!> <div class="image-container svelte-17agwu4"><img alt="Working image" class="working-image svelte-17agwu4"/></div> <!> <!>',1),gt=I('<div class="ai-tab svelte-17agwu4"><!></div>');function pt(a,t){Z(t,!1);const e=()=>J(he,"$aiState",i),r=()=>J(ct,"$hasAiImage",i),o=()=>J(Je,"$activeAiMenu",i),[i,s]=me(),v=[{id:"enhance",label:"Enhance"},{id:"upscale",label:"Upscale"},{id:"background",label:"Remove background"}];function l(n){he.setImage(n)}function f(n){Je.set(n)}async function u(){e().currentImage&&await $e(e().currentImage)}function _(){e().currentImage&&Ze(e().currentImage,"picflam-ai.png")}ee();var d=gt(),m=A(d);{var w=n=>{je(n,{title:"Enhance, upscale and remove backgrounds using AI power",hint:"Import, drag or paste an image",onImageImport:l})},z=n=>{var c=dt(),S=U(c);Pe(S,{canUndo:!1,canRedo:!1,onUndo:()=>{},onRedo:()=>{},onStartAgain:()=>he.reset(),onCopy:u,onExport:_});var k=E(S,2),x=A(k);C(k);var y=E(k,2);Me(y,{get tabs(){return v},get activeTab(){return o()},onTabChange:f});var g=E(y,2);{var b=T=>{var p=vt();h(T,p)},M=T=>{var p=B(),D=U(p);{var $=R=>{var N=ut();h(R,N)},re=R=>{var N=B(),q=U(N);{var oe=W=>{var se=ft();h(W,se)};F(q,W=>{o()==="background"&&W(oe)},!0)}h(R,N)};F(D,R=>{o()==="upscale"?R($):R(re,!1)},!0)}h(T,p)};F(g,T=>{o()==="enhance"?T(b):T(M,!1)})}G(()=>Ge(x,"src",e().currentImage)),h(n,c)};F(m,n=>{r()?n(z,!1):n(w)})}C(d),h(a,d),j(),s()}const ht={canvasSize:"1/1",background:{type:"solid",value:"#FFFFFF"},text1:"",text1Font:"Inter",text1Size:5,text1YPosition:3,text1LineSpacing:5,text1Color:"#000000",text1HighlightColor:"transparent",text1IsBold:!0,text1Align:"center",text1QuoteStyle:"none",text1QuoteSize:5,text2:"",text2Font:"Inter",text2Size:3,text2YPosition:8,text2LineSpacing:5,text2Color:"#000000",text2LabelColor:"transparent",text2IsBold:!1,text2Align:"center",overlay:null,overlayScale:1,overlayOpacity:1,overlayX:0,overlayY:0,overlayMask:"none",overlayWrap:!1,overlayBorderWidth:0,overlayBorderColor:"#FFFFFF"};function bt(a){const t=[JSON.parse(JSON.stringify(a))];let e=0;const{subscribe:r,set:o,update:i}=K(a);return{subscribe:r,set:s=>{t.splice(e+1),t.push(JSON.parse(JSON.stringify(s))),e=t.length-1,o(s)},update:s=>{i(v=>{const l=s(v);return t.splice(e+1),t.push(JSON.parse(JSON.stringify(l))),e=t.length-1,l})},undo:()=>e>0?(e--,o(JSON.parse(JSON.stringify(t[e]))),!0):!1,redo:()=>e<t.length-1?(e++,o(JSON.parse(JSON.stringify(t[e]))),!0):!1,canUndo:()=>e>0,canRedo:()=>e<t.length-1,reset:()=>{const s=JSON.parse(JSON.stringify(a));t.length=0,t.push(s),e=0,o(s)}}}const V=bt(ht),Ee=K(!0),ze=K("none");Fe(V,a=>a.text1||a.text2||a.overlay||a.background.value!=="#FFFFFF");function mt(){V.reset(),Ee.set(!0),ze.set("none")}var _t=I('<button class="template-card svelte-fxk5n4"><div class="template-placeholder svelte-fxk5n4"> </div></button>'),wt=I('<div class="template-picker svelte-fxk5n4"><p class="picker-title svelte-fxk5n4">Create quotes and cards. Start with a template or blank canvas</p> <button class="blank-canvas-btn svelte-fxk5n4"><img src="/icons/icon-add.svg" alt="" class="add-icon svelte-fxk5n4"/></button> <div class="template-grid svelte-fxk5n4"></div></div>'),yt=I('<p class="placeholder svelte-fxk5n4">Size controls coming in Phase 5</p>'),It=I('<p class="placeholder svelte-fxk5n4">Background controls coming in Phase 5</p>'),St=I('<p class="placeholder svelte-fxk5n4">Text 1 controls coming in Phase 5</p>'),kt=I('<p class="placeholder svelte-fxk5n4">Text 2 controls coming in Phase 5</p>'),xt=I('<p class="placeholder svelte-fxk5n4">Quote controls coming in Phase 5</p>'),Tt=I('<p class="placeholder svelte-fxk5n4">Overlay controls coming in Phase 5</p>'),Ct=I('<!> <div class="canvas-container svelte-fxk5n4"><div class="design-canvas svelte-fxk5n4"></div></div> <!> <div class="controls-panel svelte-fxk5n4"><!></div>',1),Et=I('<div class="design-tab svelte-fxk5n4"><!></div>');function zt(a,t){Z(t,!1);const e=()=>J(ze,"$activeDesignMenu",i),r=()=>J(Ee,"$showTemplatePicker",i),o=()=>J(V,"$slideState",i),[i,s]=me(),v=[{id:"size",label:"Size"},{id:"background",label:"Background"},{id:"text1",label:"Text 1"},{id:"text2",label:"Text 2"},{id:"quote",label:"Quote"},{id:"overlay",label:"Overlay"}];function l(n){n==="blank"&&V.reset(),Ee.set(!1)}function f(n){ze.set(e()===n?"none":n)}async function u(){}function _(){}ee();var d=Et(),m=A(d);{var w=n=>{var c=wt(),S=E(A(c),2),k=E(S,2);Ve(k,4,()=>[1,2,3,4,5,6],Xe,(x,y)=>{var g=_t(),b=A(g),M=A(b);C(b),C(g),G(()=>be(M,`Template ${y??""}`)),P("click",g,()=>l(`template-${y}`)),h(x,g)}),C(k),C(c),P("click",S,()=>l("blank")),h(n,c)},z=n=>{var c=Ct(),S=U(c);{let p=ve(()=>V.canUndo()),D=ve(()=>V.canRedo());Pe(S,{get canUndo(){return H(p)},get canRedo(){return H(D)},onUndo:()=>V.undo(),onRedo:()=>V.redo(),get onStartAgain(){return mt},onCopy:u,onExport:_})}var k=E(S,2),x=A(k);C(k);var y=E(k,2);Me(y,{get tabs(){return v},get activeTab(){return e()},onTabChange:f});var g=E(y,2),b=A(g);{var M=p=>{var D=yt();h(p,D)},T=p=>{var D=B(),$=U(D);{var re=N=>{var q=It();h(N,q)},R=N=>{var q=B(),oe=U(q);{var W=ae=>{var ue=St();h(ae,ue)},se=ae=>{var ue=B(),ea=U(ue);{var aa=te=>{var fe=kt();h(te,fe)},ta=te=>{var fe=B(),na=U(fe);{var ra=ne=>{var de=xt();h(ne,de)},oa=ne=>{var de=B(),sa=U(de);{var ia=_e=>{var la=Tt();h(_e,la)};F(sa,_e=>{e()==="overlay"&&_e(ia)},!0)}h(ne,de)};F(na,ne=>{e()==="quote"?ne(ra):ne(oa,!1)},!0)}h(te,fe)};F(ea,te=>{e()==="text2"?te(aa):te(ta,!1)},!0)}h(ae,ue)};F(oe,ae=>{e()==="text1"?ae(W):ae(se,!1)},!0)}h(N,q)};F($,N=>{e()==="background"?N(re):N(R,!1)},!0)}h(p,D)};F(b,p=>{e()==="size"?p(M):p(T,!1)})}C(g),G(()=>Ha(x,`
					aspect-ratio: ${o().canvasSize??""};
					background: ${o().background.type==="solid",o().background.value??""};
				`)),h(n,c)};F(m,n=>{r()?n(w):n(z,!1)})}C(d),h(a,d),j(),s()}const We=K("crop");var At=I('<!> <main class="main svelte-1uha8ag"><!></main>',1);function Ht(a,t){Z(t,!1);const e=()=>J(We,"$activeTab",r),[r,o]=me();function i(d){We.set(d)}ee();var s=At(),v=U(s);qa(v,{get activeTab(){return e()},onTabChange:i});var l=E(v,2),f=A(l);{var u=d=>{it(d,{})},_=d=>{var m=B(),w=U(m);{var z=c=>{pt(c,{})},n=c=>{var S=B(),k=U(S);{var x=y=>{zt(y,{})};F(k,y=>{e()==="design"&&y(x)},!0)}h(c,S)};F(w,c=>{e()==="ai"?c(z):c(n,!1)},!0)}h(d,m)};F(f,d=>{e()==="crop"?d(u):d(_,!1)})}C(l),h(a,s),j(),o()}export{Ht as component};
